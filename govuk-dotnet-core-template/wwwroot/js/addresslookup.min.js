function getAddresses() { let e = $("#SearchPostCode").val(); $("#addressError").hide(), "" !== e && ($("#loadSpinner").show(), $.get("/Pointer/GetAddresses/", { postCode: e }, function (e) { $("#SearchAddress").empty(), $("#SearchAddress").append($("<option value=''>Select Address</option>")), $.each(e, function () { $(".govuk-error-summary").hide(), $("#loadSpinner").hide(), $("#SearchAddressList").show(), $("#addressError").hide(), $("#SearchAddress").append($("<option></option>").val(this.buildingNumber).html(this.buildingNumber + " " + this.primaryThorfare + "," + this.town + "," + this.postcode)) }) }).fail(function () { $(".govuk-error-summary").show(), 0 === $(".error-items").length && $(".govuk-error-summary__list").append("<li><a class='error-items' href='#SearchPostCode'>Not a real postcode. Address could not be found.</a></li>"), $("#PostCodeSearchComponent").addClass("govuk-form-group--error"), $("#SearchPostCode").addClass("govuk-input--error"), $("#SearchPostCode").val("Not a postcode"), $("#addressError").show(), $("#loadSpinner").hide(), $("#SearchAddressList").hide() })) } function fillAddressTextBoxes() { let e = $("#SearchAddress :selected").text(); if ("Select Address" !== e) { let r = e.split(","); $("#Address1").val(""), $("#Address2").val(""), $("#Address3").val(""), $("#TownCity").val(""), $("#PostCode").val(""), $("#Address1").val(r[0]), $("#TownCity").val(r[1]), $("#PostCode").val(r[2]) } } $("#SearchPostCode").on("keyup keypress", function (e) { return 13 !== (e.keyCode || e.which) || (getAddresses(), e.preventDefault(), !1) });